!function(t){"use strict";t.fn.rowReordering=function(n){function e(n){n.fnSettings().oFeatures.bProcessing&&t(".dataTables_processing").css("visibility","visible")}function i(n){n.fnSettings().oFeatures.bProcessing&&t(".dataTables_processing").css("visibility","hidden")}function o(t,n,e,i,o){n.sortable("cancel"),i<=e.iLogLevel&&(void 0!=o?e.fnAlert(o,""):e.fnAlert("Row cannot be moved","")),e.fnEndProcessingMode(t)}function r(n,e,i){var o,r=t("#"+i,n),a=n.fnGetData(r[0],d.iIndexColumn),s=-1,u=r.prev(e);if(u.length>0)s=parseInt(n.fnGetData(u[0],d.iIndexColumn)),a>s&&(s+=1);else{var f=r.next(e);f.length>0&&(s=parseInt(n.fnGetData(f[0],d.iIndexColumn)),s>a&&(s-=1))}return o=a>s?"back":"forward",{sDirection:o,iCurrentPosition:a,iNewPosition:s}}function a(n,e,i,o,r,a,s){var u=i,f=o;"back"==r&&(u=o,f=i),t(n.fnGetNodes()).each(function(){if(""==s||t(this).attr("data-group")==s){var e=this,i=parseInt(n.fnGetData(e,d.iIndexColumn));i>=u&&f>=i&&(e.id==a?n.fnUpdate(o,n.fnGetPosition(e),d.iIndexColumn,!1):"back"==r?n.fnUpdate(i+1,n.fnGetPosition(e),d.iIndexColumn,!1):n.fnUpdate(i-1,n.fnGetPosition(e),d.iIndexColumn,!1))}});var c=n.fnSettings();if(c.oFeatures.bServerSide===!1){var l=c._iDisplayStart;c.oApi._fnReDraw(c),c._iDisplayStart=l,c.oApi._fnCalculateEnd(c)}c.oApi._fnDraw(c)}function s(t,n){alert(t)}var u={iIndexColumn:0,iStartPosition:1,sURL:null,sRequestType:"POST",iGroupingLevel:0,fnAlert:s,fnSuccess:jQuery.noop,iLogLevel:1,sDataGroupAttribute:"data-group",fnStartProcessingMode:e,fnEndProcessingMode:i,fnUpdateAjaxRequest:jQuery.noop},d=t.extend(u,n),f=function(n,e){var i=e.children(),o=e.clone();return o.children().each(function(n){t(this).width(i.eq(n).width())}),o};return this.each(function(){var n=t(this).dataTable(),e=null==n.fnSettings().aaSortingFixed?new Array:n.fnSettings().aaSortingFixed;e.push([d.iIndexColumn,"asc"]),n.fnSettings().aaSortingFixed=e;for(var i=0;i<n.fnSettings().aoColumns.length;i++)n.fnSettings().aoColumns[i].bSortable=!1;n.fnDraw(),t("tbody",n).disableSelection().sortable({cursor:"move",helper:f,update:function(e,i){var s=n,u=t(this),f="tbody tr",c="";if(d.bGroupingUsed){if(c=t(i.item).attr(d.sDataGroupAttribute),null==c||void 0==c)return void o(s,u,d,3,"Grouping row cannot be moved");f="tbody tr["+d.sDataGroupAttribute+" ='"+c+"']"}var l=r(s,f,i.item.context.id);return-1==l.iNewPosition?void o(s,u,d,2):void(null!=d.sURL?(d.fnStartProcessingMode(s),s.find("tr").each(function(){if(void 0!=t(this).attr("id")){var n={url:d.sURL,type:d.sRequestType,data:{id:t(this).attr("id"),table:t(this).attr("data-table"),record_order:t(this).index()},success:function(t){d.fnSuccess(t),a(s,f,l.iCurrentPosition,l.iNewPosition,l.sDirection,i.item.context.id,c),d.fnEndProcessingMode(s)},error:function(t){o(s,u,d,1,t.statusText)}};d.fnUpdateAjaxRequest(n,d,s),t.ajax(n)}})):a(s,f,l.iCurrentPosition,l.iNewPosition,l.sDirection,i.item.context.id,c))}})})}}(jQuery);